{# {% extends "@Tabler/embeds/card.html.twig" %} #}

{% set _items = [] %}
{% for key, item in items %}
    {% if item.id is not defined %}
        {% set item = item|merge({id : random(999999)}) %}
    {% endif %}
    {% set _items = _items|merge({ (key) : item }) %}
{% endfor %}

{% block card_before %}{% endblock %}
<div class="card {% block card_class %}mb-3{% endblock %}">
    <div class="row g-0">

        {# Nav items #}
        {% block nav_before %}{% endblock %}
        <div class="{% block nav_size %}col-3{% endblock %} border-end {% block nav_display %}d-none d-md-block{% endblock %}">
            <div class="card-body">
                <div class="list-group {% block nav_list_class %}list-group-transparent{% endblock %}">
                    {% for item in _items %}
                        {% if item.header ?? false %}
                            <h4 class="subheader {% block nav_header_class %}mx-4 mt-3{% endblock %}">{{ item.name }}</h4>
                        {% else %}
                            <a
                                    href="#tabs-{{ item.id }}"
                                    class="list-group-item list-group-item-action d-flex align-items-center {% if loop.first %}active{% endif %}"
                                    data-bs-toggle="tab"
                            >
                                {% if item.raw ?? false %}
                                    {{ item.name | raw }}
                                {% else %}
                                    {{ item.name }}
                                {% endif %}
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        {% block nav_after %}{% endblock %}

        {# Contents #}
        {% block content_before %}{% endblock %}
        <div class="col d-flex flex-column">
            <div class="card-body">
                <div class="tab-content">
                    {% for item in _items %}
                        {% if item.content is defined %}
                            <div class="tab-pane {% if loop.first %}active show{% endif %}"
                                 id="tabs-{{ item.id }}"
                                 role="tabpanel"
                            >
                                {{ item.content|raw }}
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
        {% block content_after %}{% endblock %}

    </div>
</div>
{% block card_after %}{% endblock %}
